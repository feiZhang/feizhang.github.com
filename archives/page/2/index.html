<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>第 2 页 | 归档 | 张非飞</title>
  <meta name="author" content="张飞">
  
  <meta name="description" content="技术,独立思考,梁鹏,张飞">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="张非飞"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="张非飞" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
  <link rel='canonical' href='http://www.liangpeng.net/archives/page/2/' />
</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">张非飞</a></h1>
  <h2><a href="/">享受慢生活</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/archives">文章</a></li>
    
      <li><a href="/dxextfortp">DxExtForTP</a></li>
    
      <li><a href="/team">团队</a></li>
    
      <li><a href="/aboutme">AboutMe</a></li>
    
      <li><a href="/atom.xml">RSS</a></li>
    

<li> <a title="把这个链接拖到你的Chrome收藏夹工具栏中" href='javascript:(function() {
    function c() {
        var e = document.createElement("link");
        e.setAttribute("type", "text/css");
        e.setAttribute("rel", "stylesheet");
        e.setAttribute("href", f);
        e.setAttribute("class", l);
        document.body.appendChild(e)
    }
 
    function h() {
        var e = document.getElementsByClassName(l);
        for (var t = 0; t < e.length; t++) {
            document.body.removeChild(e[t])
        }
    }
 
    function p() {
        var e = document.createElement("div");
        e.setAttribute("class", a);
        document.body.appendChild(e);
        setTimeout(function() {
            document.body.removeChild(e)
        }, 100)
    }
 
    function d(e) {
        return {
            height : e.offsetHeight,
            width : e.offsetWidth
        }
    }
 
    function v(i) {
        var s = d(i);
        return s.height > e && s.height < n && s.width > t && s.width < r
    }
 
    function m(e) {
        var t = e;
        var n = 0;
        while (!!t) {
            n += t.offsetTop;
            t = t.offsetParent
        }
        return n
    }
 
    function g() {
        var e = document.documentElement;
        if (!!window.innerWidth) {
            return window.innerHeight
        } else if (e && !isNaN(e.clientHeight)) {
            return e.clientHeight
        }
        return 0
    }
 
    function y() {
        if (window.pageYOffset) {
            return window.pageYOffset
        }
        return Math.max(document.documentElement.scrollTop, document.body.scrollTop)
    }
 
    function E(e) {
        var t = m(e);
        return t >= w && t <= b + w
    }
 
    function S() {
        var e = document.createElement("audio");
        e.setAttribute("class", l);
        e.src = i;
        e.loop = false;
        e.addEventListener("canplay", function() {
            setTimeout(function() {
                x(k)
            }, 500);
            setTimeout(function() {
                N();
                p();
                for (var e = 0; e < O.length; e++) {
                    T(O[e])
                }
            }, 15500)
        }, true);
        e.addEventListener("ended", function() {
            N();
            h()
        }, true);
        e.innerHTML = " <p>If you are reading this, it is because your browser does not support the audio element. We recommend that you get a new browser.</p> <p>";
        document.body.appendChild(e);
        e.play()
    }
 
    function x(e) {
        e.className += " " + s + " " + o
    }
 
    function T(e) {
        e.className += " " + s + " " + u[Math.floor(Math.random() * u.length)]
    }
 
    function N() {
        var e = document.getElementsByClassName(s);
        var t = new RegExp("\\b" + s + "\\b");
        for (var n = 0; n < e.length; ) {
            e[n].className = e[n].className.replace(t, "")
        }
    }
 
    var e = 30;
    var t = 30;
    var n = 350;
    var r = 350;
    var i = "//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake.mp3";
    var s = "mw-harlem_shake_me";
    var o = "im_first";
    var u = ["im_drunk", "im_baked", "im_trippin", "im_blown"];
    var a = "mw-strobe_light";
    var f = "//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake-style.css";
    var l = "mw_added_css";
    var b = g();
    var w = y();
    var C = document.getElementsByTagName("*");
    var k = null;
    for (var L = 0; L < C.length; L++) {
        var A = C[L];
        if (v(A)) {
            if (E(A)) {
                k = A;
                break
            }
        }
    }
    if (A === null) {
        console.warn("Could not find a node of the right size. Please try a different page.");
        return
    }
    c();
    S();
    var O = [];
    for (var L = 0; L < C.length; L++) {
        var A = C[L];
        if (v(A)) {
            O.push(A)
        }
    }
})()    '>High一下</a> </li>


  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div>
</header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper">
<h2 class="archive-title">归档</h2>


  
    <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2013-11-27T16:00:00.000Z"><a href="/y2013/m11/talent-test.html">2013-11-28</a></time>
      
      
  
    <h1 class="title"><a href="/y2013/m11/talent-test.html">人才测评</a></h1>
  

    </header>
    <div class="entry">
      
        <h3 id="-">技术</h3>
<ol>
<li>对开发者最有用的5个网站</li>
<li>你经常使用的开发工具</li>
<li>你经常浏览的5个网站</li>
<li>你最好的技术是哪些？各有什么特点？</li>
</ol>
<h3 id="-">知识</h3>
<ol>
<li>你最喜欢的专业领域是什么?</li>
<li>有没有对某个问题或事物进行过深入思考，结论是什么？</li>
</ol>
<h3 id="-">个人</h3>
<ol>
<li>你最欣赏的性格特征是什么？</li>
<li>做过的最有趣的事情是什么？</li>
<li>做过的最成功的事情是什么？</li>
<li>做过的最后悔的事情是什么？</li>
<li>是否有职业规划，是什么？</li>
<li>你有什么优点？有何佐证？</li>
</ol>
<h3 id="-">公司</h3>
<ol>
<li>你最在意的公司环境有什么？</li>
<li>什么样的公司是个好公司？</li>
</ol>
<h3 id="-">试用</h3>
<ol>
<li>在时间充足的条件下，是否能够检查自己完成的工作，优化自己的工作成果。即：精品意识</li>
<li>是否有钻研学习的欲望</li>
</ol>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  
    <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2013-11-20T04:26:31.000Z"><a href="/y2013/m11/fight-for-their-own-interests-new-employees-series.html">2013-11-20</a></time>
      
      
  
    <h1 class="title"><a href="/y2013/m11/fight-for-their-own-interests-new-employees-series.html">为自己的利益而奋斗－新员工系列</a></h1>
  

    </header>
    <div class="entry">
      
        <p>我的老板及其严厉的人，有一次，我作为项目经理和老板去跟客户谈一个项目，不是很顺利，回来的路上，顺口问同事，“PSTN是个啥呀”，身边的老板立马发作了，“你丫的，PSTN都不知道是什么，跟人家客户谈个毛项目呀，都不知道他妈的先学习基础概念？”，靠，哥们我一听也他妈的气愤了，“妈的，我是一个程序员呀，又不是搞通信的，这我怎么该知道？”，当然，这些话，只能在心里骂。</p>
<p>人有情绪是应该的，但是总是被情绪控制，就比较傻逼了，到底是“公司先给我涨工资，我才更好的去工作”，还是“我更好的工作，公司给我涨工资”，显然，谁主动，谁就小亏。那么是不是我们就要天天撞钟，等老板给多点钱，才去干点扫地的这个事。时间和5毛钱，那个更重要呢？</p>
<p>道理看起来很明显，现实却很骨感，初出茅庐的我们，总是嫌得到的少，而不愿意去付出。即便付出了，也没有使出10分的力气，敷衍了事，事事凑合。领导严厉一点，还一堆的理由，岂不知，你所经历的才是你的财富，别人给予的，只是利息而已。没有大量的财富，谈何丰厚的利息。而且，这个利息还是驴打滚呀。</p>
<p>那么我能做什么呢？</p>
<ol>
<li>凡事多动脑：不要以为，凑合能用就行了，你可知，商品品质20%的差异，价格可以差10倍，想想悲催的诺基亚吧，曾经以为完美的存在，瞬间就被秒杀了</li>
<li>寻求帮助是一个好方法：但是一定要先自己尝试解决要，万事不决问google，之后再问人，不要浪费别人时间呀，首先看看这个<a href="http://www.zhihu.com/question/19555761" target="_blank">主题</a></li>
<li>多动手操作：任何知识，要向据为己有，知识听听看看是不行地，“自己动手丰衣足食”是恒古不变的法则</li>
<li>不要拒绝批评：面对批评，心里不爽是可以地，一直不爽就是傻逼地，人生中有人愿意冒风险给你批评，是你的福分呀，当然，也不能一概接收，还是要有独立思考能力地</li>
<li>审视自我：很多时候，我们在自己画的圈圈中打转，无法前进，这时候就要自省了，什么时候能开悟，就看造化了，所谓：佛渡有缘人</li>
<li>多花时间：我们都是凡人，要想在某个方面超越别人，多花时间是不二法门（你是乔布斯，就当我没说）</li>
<li>锻炼沟通的能力：提问是门艺术，提问的质量决定答案的质量</li>
</ol>
<p>利益最大化现实途径，其实就是多干活，更快的提高自己的能力，提高自己本身的价值，形成长期的利益最大化。是不是多干活一定能提高能力？这里面牵涉到一个能力转化率的问题，某些人做一个项目能够明白5个技术点，而有些人只能明白3个，长期积累，个人能力的差距会越来越大，一个项目涉及方方面面的内容，管理、需求、设计、编码、测试，可能每个人的兴趣点不同，人也不可能面面俱到，只要在你自己选择的方向提高即可。那么如何来提高转化率，复杂而又简单的问题，</p>
<p>尝试、归纳、思考、总结、改变。</p>
<p>个人感觉，就是这么个套路，具体的执行情况，就看每个人自己的执行力和欲望的大小了。</p>
<p>坚持迭代！！！</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  
    <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2013-11-20T02:26:38.000Z"><a href="/y2013/m11/project-design-and-code-organization-case-study.html">2013-11-20</a></time>
      
      
  
    <h1 class="title"><a href="/y2013/m11/project-design-and-code-organization-case-study.html">需求分析与功能设计 案例分析</a></h1>
  

    </header>
    <div class="entry">
      
        <p>注：本实例绝非虚构，针对初级开发者，改变<code>程序员＝打字</code>的困境</p>
<h2 id="-">需求分析</h2>
<p>背景：证书打印功能，能够打印3份证书：正本（机构名称、住所）、副本第一页（编号、发证机关）、副本第二页（机构名称、法人）</p>
<ol>
<li>第一次需求描述：需要个能够打印证书的功能</li>
<li>第二次需求变更：经营范围固定为某段文字，不能修改，自动生成证书编号</li>
<li>第三次需求变更：需要在证书打印功能中增加打印记录功能，要求1天完成</li>
<li>第四次需求变更：打印第一页时填写的内容，能够在第二页复用，要求尽快完成</li>
<li>第五次需求变更：增删改查打印内容，之后根据填写的打印内容打印证书，并能导出打印内容列表（作为绩效）</li>
</ol>
<p>问题总结：</p>
<ol>
<li>每次都是听客户两句话就要求开发完成功能，未深入挖掘需求</li>
<li>第五次需求完成时间比第三次需求要求时间晚2周，而每次要求都是紧急，导致无法全面规划功能设计</li>
<li>第五次需求完全覆盖第四次需求，浪费开发资源</li>
</ol>
<p>解决方法：</p>
<ol>
<li>充分与客户沟通，深入分析客户需要，完善需求。参阅 <a href="http://www.liangpeng.net/y2013/m09/write-a-meaningful-requirements-document_2181.html"><strong>写出一份有意义的需求文档</strong></a></li>
<li>尽量争取合适的开发时间</li>
</ol>
<h2 id="-">功能设计</h2>
<p>在需求挖掘不够充分，描述不清时，开发人员有责任通过自己的主观分析来引导需求完善</p>
<p>此次分析，依据：<code>第三次需求变更</code></p>
<h4 id="-">明确目地</h4>
<p>第三次需求变更，可以设想出两种不同的目的：</p>
<ol>
<li>客户是希望知道谁在什么时候打印了什么，打印了多少次</li>
<li>证书需要每年更换，第二次打印希望能够复用上一次的打印数据</li>
</ol>
<p>不同的目地有不同的设计思路</p>
<p>目的一：关注于什么人什么时间打印了什么；此时要注意：打印错误如何标记；
目的二：关注于如何减少用户的工作量；此时要注意：是否可以结合 机构档案、机构年审功能 来处理 证书打印功能；</p>
<p>本案例，目的一与目的二不冲突。完全可以同时实现，但功能实现的时间要求有限，同时也没必要完成客户不需要的功能，所以选择哪个方向，应继续与客户沟通。</p>
<p><code>错误的方向，走的越远，错的越远。</code></p>
<h4 id="-">设计分析</h4>
<p>背景：选定实现第一个目的</p>
<h6 id="-">第一次设计</h6>
<p>打印记录表结构：机构名称、住所、编号、发证机关、机构名称、法人、打印时间、打印人</p>
<p>功能：没点击一次打印，增加一条打印记录</p>
<p>缺点：3个不同的打印，能够填充的字段不同，记录看起来总是不完整的。</p>
<h6 id="-">第二次设计</h6>
<p>表机构修改为：打印人、打印内容、打印时间</p>
<p>功能修正：将所有的打印数据整合为一个字段－打印内容</p>
<h6 id="-">第三次设计</h6>
<p>表结构修改为：机构名称、打印人、打印内容、打印时间</p>
<p>功能修正：将机构名称独立出来，作为数据整合的基准，比如：要查看某个机构的所有打印记录</p>
<p>缺点：实际上3份打印内容，才算一次完整的打印记录，现在的设计无法体现这个概念</p>
<h6 id="-">总结</h6>
<p>iphone发布前，进行过无数次的设计修正，那可是世界顶级的设计师，而我们每次写代码前都是不加思索，错误百出，为何不在开工前先想好呢？无论你是什么等级的工程师，<code>请在编码前，将自己的设计思路推翻两次以上</code></p>
<h2 id="-">代码组织</h2>
<p>此次分析并不涉及代码组织的分析，为了突出代码组织的重要性，在这里再次说明<code>请在编码前，将自己的代码组织思路推翻两次以上</code>。</p>
<p>案例：材料管理是我们公司最有技术能力的人独立完成的项目，此人熟知各种技术、能够解决各种疑难杂症，但是这个项目却久经维护，依然破烂不堪，让人头痛。代码是需要组织的，不是拼凑起来就管用。<code>能够驾驭万行代码才是真技术</code></p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  
    <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2013-09-20T02:26:38.000Z"><a href="/y2013/m09/write-a-meaningful-requirements-document.html">2013-09-20</a></time>
      
      
  
    <h1 class="title"><a href="/y2013/m09/write-a-meaningful-requirements-document.html">写出一份有意义的需求文档</a></h1>
  

    </header>
    <div class="entry">
      
        <h3 id="-">重要性</h3>
<ol>
<li>需求作为软件开发的排头兵，决定了项目发展的方向，方向错误，全局失败</li>
<li>需求的频繁变动，不仅影响项目的进度，更影响编码人员的工作热情、工作态度（人心散了，队伍就不好带了）</li>
</ol>
<p>参考：<a href="http://liangpeng.net/y2013/m11/project-design-and-code-organization-case-study.html" target="_blank"><strong>项目设计与代码组织-案例分析</strong></a></p>
<h3 id="-">视角</h3>
<h5 id="-">以客户需要为视角</h5>
<p>应该以客户的视角来书写文档，以客户实际的需要作为中心。比如：工单管理，应写明客户为什么需要求救工单，客户现实中是如何处理求救工单的，而不是直接将需求具体为：录入工单、回访工单</p>
<h5 id="-">以软件设计为视角</h5>
<p>必须以定量分析来描述文档，而不是概念描述，比如：一般情况下、通常、大概、有时候，这些概念性的内容，计算机乃至程序员是无法理解的，应该将各种不同的情况加以分析，转换为可以判定条件，比如：美女筛选这个业务，1.身高大于170cm 2.体重小于45kg 这些定量的数据，可行，而 3.皮肤白 4.气质佳，这样无法定量的条件，就需要深入思考、妥协，转换为定量的数据，比如：3.白 &gt; #333333 4.智商大于120并且情商大于&gt;130，或者调整业务，增加人工投票的功能。</p>
<h3 id="-">系统目标</h3>
<p>不能是笼统的，走形式的，是真正的目标，有意义的目标，不多，但是必须有，如果根本都想不出来，那就需要先考虑系统存在的必要性</p>
<ol>
<li>解决了什么问题</li>
<li>优化了什么业务</li>
<li>增加了什么便利</li>
<li>或者达到了某种目的（圈钱、面子工程等）</li>
</ol>
<p>根据目的，来确定系统要实现的功能，实现功能的方法。比如：</p>
<ol>
<li>面子工程：就不需要搞复杂的业务逻辑，而是展现更多的功能，但不需要每个功能很强大，有就行，而界面要符合某些人的口味。</li>
<li>便利性：则着重突出UI交互，让用户一看就懂，不学就会用</li>
<li>优化业务：那就需要把业务流程搞清楚</li>
<li>解决问题：需要找出本质的问题，而不是表面的问题</li>
</ol>
<p>没有哪个系统能够满足全世界的需要，强大如iPhone也没有征服全世界，必须有所取舍，找出自己的亮点。</p>
<h3 id="-">业务分析</h3>
<h4 id="-">以场景演练为出发点</h4>
<p>最好能够以实际用户的身份，对现实的业务流程进行操作，熟悉每个业务步骤的原始执行方式，体会操作的实际效果及意义，在没有实际操作条件的情况下，也要尽量在脑海中，将每个业务过程演练多边（要有带入感，就像过电影片段一样），了解现实的操作方法之后，才能抽象出符合客户需要的产品设计方案。</p>
<h4 id="-">穷尽特殊情况</h4>
<p>对于某些复杂的业务运算，应穷尽各种情况，让用户进行解答，从而找出正确的计算方法：</p>
<p>？？</p>
<h4 id="-">明确优先级</h4>
<ol>
<li>项目功能较多时，应分析出功能点的优先级，指导开发安排进度</li>
<li>尽量指定各个功能点希望完成的时间点（技术部根据期望的时间点和功能的难易程度，规划进度表）</li>
</ol>
<h3 id="-">文档的组织方式</h3>
<p>很多需求文档都是对功能的罗列，1、2、3、4、5，仅仅是一个一个的罗列，读起来索然无味，根本无法调动阅读者的积极性，让人读得很勉强，引不起思考。甚至，不谈功能与功能的联系，苍白的义务式的罗列。</p>
<h4 id="-">功能组织</h4>
<p>将能够完成一项特定任务的功能，按照业务逻辑走向，进行分组表述，是一个较好的方法，恰当的功能表述顺序，与内容组织，更容易让人理解作者的本意</p>
<p>而对于那些诸如：参数设置、业务字典、部门管理等等一些无脑功能，基本是固定不变的内容，简单罗列即可</p>
<h4 id="-">罗列基本、突出重点、详尽难点</h4>
<p>长篇累牍，重点不清的文档虽然也能说明问题，但是会增加阅读的难度，容易被程序员抵制，甚至抛弃，即便是强制去读，也不利于理解。</p>
<p>比如：客户管理这个大功能</p>
<p>如果分解为：新增客户、删除客户、修改客户、客户资料查看、客户信息统计，并详尽说明；有多大意义？</p>
<p>较好的分法：</p>
<ol>
<li>客户档案管理：新增、修改、删除、查看（一行文字就ok了）；然后列出客户档案的字段，针对较复杂的字段，进行特别说明</li>
<li>针对客户的类别分别描述不同的客户有那种不同的业务处理方式</li>
<li>针对不同的统计内容，画出对应的统计结果草图，并略微说明统计的意义</li>
<li>对一些特殊的界面需求，比如：查询条件，做出具体要求，并说明其中的用意</li>
<li>与客户相关的业务，指明必要的链接</li>
</ol>
<p>对于一些较复杂的业务逻辑，比如：运营补贴的计算方式（因素很多），要穷尽各种因素的组合，进行详细描述。</p>
<h4 id="-">用业务实例辅助说明</h4>
<p>以实例来描述业务场景，通常更容易理解，比如：老人档案审批</p>
<hr>
<ol>
<li><em>社区</em>填写<strong>老人档案</strong>，提交给<em>街道</em>，进行<strong>第一次审批</strong></li>
<li><em>街道</em><strong>第一次审批</strong><ol>
<li>通过后，提交给<em>区县</em>，进行<strong>第二次审批</strong><ol>
<li><em>区县</em>审批通过，则将<strong>老人档案</strong>设置为 <strong>已审批档案</strong></li>
<li><em>区县</em>未审批通过，则将档案退回到街道重新审批</li>
</ol>
</li>
<li>审批未通过，则退回给<em>社区</em><ol>
<li>xxxxx</li>
<li>xxxxx</li>
</ol>
</li>
</ol>
</li>
</ol>
<p>备注：</p>
<ol>
<li>每次审批，有：通过、未通过两个选项，对于未通过的审批，必须填写审批意见。</li>
<li>其中街道在审批过程中，可以修改：审批意见、截止日期</li>
</ol>
<hr>
<ol>
<li>场景中可以使用实际的客户名称，比如：金水区民政局、丰庆路街道办等，增加可阅读性</li>
<li>对于描述的内容，可增加 斜体、粗体、下划线 等因素，将角色、业务点、业务数据 等内容，着重标出，提高内容质量</li>
</ol>
<h3 id="-">文档优化</h3>
<ol>
<li>使用更形象、合适的语言描述，比如：移动用户的增加，是“新用户入网”，而不是“新增用户”，“新增团队”也没有“创建新团队”更贴切</li>
</ol>
<h3 id="-">笔者注</h3>
<ol>
<li>系统及文档迭代化：系统的第一版不要追求过大过复杂，而应紧抓核心目的，仅完成核心目的必须的内容，随后的功能逐步添加；类似于抛砖引玉</li>
<li>系统可持续交付：每个功能的完成，系统都是完整的、客户可用的</li>
</ol>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  
    <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2013-08-29T07:12:37.000Z"><a href="/y2013/m08/javascript-run-in-ajax.html">2013-08-29</a></time>
      
      
  
    <h1 class="title"><a href="/y2013/m08/javascript-run-in-ajax.html">谨慎使用Ajax动态引入Js(附代码与结果)</a></h1>
  

    </header>
    <div class="entry">
      
        <p>代码(index.php)：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="code"><pre>&lt;html&gt;&lt;head&gt;
&lt;script src=<span class="string">"//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"</span>&gt;&lt;/script&gt;
&lt;script&gt;console.log(<span class="string">"header"</span>,<span class="keyword">new</span> Date());&lt;/script&gt;
&lt;/head&gt;&lt;body ryt12134=<span class="string">"1"</span>&gt;
&lt;script&gt;console.log(<span class="string">"body_header"</span>,<span class="keyword">new</span> Date());&lt;/script&gt;
&lt;script&gt;
(<span class="function"><span class="keyword">function</span><span class="params">($)</span> {</span>
    $(<span class="function"><span class="keyword">function</span><span class="params">()</span> {</span>
        console.log(<span class="string">"$$$$"</span> + <span class="keyword">new</span> Date());
    });
})(jQuery);
$(document).ready(<span class="function"><span class="keyword">function</span><span class="params">()</span>{</span> console.log(<span class="string">"ready"</span>,<span class="keyword">new</span> Date());});
&lt;/script&gt;
&lt;script type=<span class="string">"text/javascript"</span> src=<span class="string">"http://42.121.117.187:8899/test.js?&lt;?php echo time();?&gt;"</span>&gt;&lt;/script&gt;
&lt;script&gt;console.log(<span class="string">"body_footer"</span>,<span class="keyword">new</span> Date());&lt;/script&gt;
&lt;/body&gt;&lt;/html&gt;
</pre></td></tr></table></figure>

<p>代码(index.html)：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">html</span>&gt;</span><span class="tag">&lt;<span class="title">head</span>&gt;</span>
<span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"</span>&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span><span class="tag">&lt;/<span class="title">head</span>&gt;</span><span class="tag">&lt;<span class="title">body</span> <span class="attribute">ryt12134</span>=<span class="value">"1"</span>&gt;</span>
<span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript">
$.get(<span class="string">"index.php"</span>,<span class="function"><span class="keyword">function</span><span class="params">(html)</span>{</span>
    $(<span class="string">"body"</span>).append(html);
});
</span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
<span class="tag">&lt;/<span class="title">body</span>&gt;</span><span class="tag">&lt;/<span class="title">html</span>&gt;</span>
</pre></td></tr></table></figure>

<p>测试结果：macos:firefox、chrome、safari -- win8:ie10 基本相同</p>
<ol>
<li>将js文件放在header中，document.ready()会等待js加载完成后再执行（header中的js是优先于body加载的）</li>
<li>将js文件放在body中，则 不考虑js是否加载就会执行（将jquery放在最后面，会导致js出错）</li>
<li><p>直接请求index.php的执行结果</p>
<pre>
header Date {Thu Aug 29 2013 14:32:51 GMT+0800 (CST)}
body_header Date {Thu Aug 29 2013 14:32:51 GMT+0800 (CST)}
qian_test.js Date {Thu Aug 29 2013 14:32:54 GMT+0800 (CST)}
hou_test.js Date {Thu Aug 29 2013 14:32:54 GMT+0800 (CST)}
body_footer Date {Thu Aug 29 2013 14:32:54 GMT+0800 (CST)}
$$$$Thu Aug 29 2013 14:32:54 GMT+0800 (CST)
ready Date {Thu Aug 29 2013 14:32:54 GMT+0800 (CST)}
</pre>
</li>
<li><p>请求index.html的执行结果（显然document.ready优先于js中的代码执行）</p>
<pre>
header Date {Thu Aug 29 2013 14:44:01 GMT+0800 (CST)}
body_header Date {Thu Aug 29 2013 14:44:01 GMT+0800 (CST)}
$$$$Thu Aug 29 2013 14:44:01 GMT+0800 (CST)
ready Date {Thu Aug 29 2013 14:44:01 GMT+0800 (CST)}
body_footer Date {Thu Aug 29 2013 14:44:01 GMT+0800 (CST)}
qian_test.js Date {Thu Aug 29 2013 14:44:04 GMT+0800 (CST)}
hou_test.js Date {Thu Aug 29 2013 14:44:04 GMT+0800 (CST)}
</pre>
</li>
</ol>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  

  <nav id="pagination">
  
    <a href="/archives/" class="alignleft prev">上一页</a>
  
  
    <a href="/archives/page/3/" class="alignright next">下一页</a>
  
  <div class="clearfix"></div>
</nav>

</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
<!--
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="搜索">
    <input type="hidden" name="q" value="site:www.liangpeng.net">
  </form>
-->


    <form action="http://www.so.com/s" target="_blank" id="so360form">
        <input type="text" x-webkit-speech="" autocomplete="off" name="q" id="so360_keyword" placeholder="搜索">
        <input type="hidden" name="ie" value="utf8">
        <input type="hidden" name="src" value="zz">
        <input type="hidden" name="site" value="liangpeng.net">
        <input type="hidden" name="rg" value="1">
    </form>
<script type="text/javascript">
(function() {
    function $(id) {
       return document.getElementById(id);
    }
    function addEvent(node , type , fn) {
        if(node.addEventListener) {
            node.addEventListener(type , fn , false);
        } else if(node.attachEvent){
            node.attachEvent("on" + type , fn);
        } else {
            node["on" + type] = fn;
        }
    };
    var form = $("so360form");
    if(!form) {
        return;
    }
    addEvent(form , "submit" , function() {
        form.src.value = "zz_" + window.location.host.replace(/\./g , "_");
        return true;
    });
})();
</script>

</div>


  
<div class="widget tag">
  <h3 class="title">最新文章</h3>
  <ul class="entry">
    
      <li>
        <a href="/y2014/m07/project_summary_for_unified_authentication.html">项目总结（统一认证平台）</a>
      </li>
    
      <li>
        <a href="/y2014/m02/closed_a_door_open_a_window.html">Closed a Door Open a Window</a>
      </li>
    
      <li>
        <a href="/y2014/m02/no_goal.html">Goal</a>
      </li>
    
      <li>
        <a href="/y2014/m01/build_trend.html">构筑趋势</a>
      </li>
    
      <li>
        <a href="/y2014/m01/hearthstone-Teach_you_as_a_person.html">炉石传说 教你作人</a>
      </li>
    
  </ul>
</div>


  
<div class="widget tagcloud">
  <h3 class="title">标签云</h3>
  <div class="entry">
    <a href="/tags/.NET/" style="font-size: 10.00px;">.NET</a><a href="/tags/30岁/" style="font-size: 10.00px;">30岁</a><a href="/tags/404/" style="font-size: 10.00px;">404</a><a href="/tags/4G/" style="font-size: 10.00px;">4G</a><a href="/tags/80后/" style="font-size: 10.00px;">80后</a><a href="/tags/90后/" style="font-size: 10.00px;">90后</a><a href="/tags/9城/" style="font-size: 10.00px;">9城</a><a href="/tags/B股/" style="font-size: 10.00px;">B股</a><a href="/tags/CPI/" style="font-size: 10.00px;">CPI</a><a href="/tags/DBA/" style="font-size: 10.00px;">DBA</a><a href="/tags/ET128/" style="font-size: 10.00px;">ET128</a><a href="/tags/Eclipse/" style="font-size: 10.00px;">Eclipse</a><a href="/tags/GB2312/" style="font-size: 10.00px;">GB2312</a><a href="/tags/GBK/" style="font-size: 10.00px;">GBK</a><a href="/tags/QQ崩溃/" style="font-size: 10.00px;">QQ崩溃</a><a href="/tags/SQL SERVER/" style="font-size: 10.00px;">SQL SERVER</a><a href="/tags/UML/" style="font-size: 10.00px;">UML</a><a href="/tags/UTF-8/" style="font-size: 10.00px;">UTF-8</a><a href="/tags/WOW/" style="font-size: 20.00px;">WOW</a><a href="/tags/a200/" style="font-size: 10.00px;">a200</a><a href="/tags/ajax/" style="font-size: 10.00px;">ajax</a><a href="/tags/android/" style="font-size: 10.00px;">android</a><a href="/tags/apple/" style="font-size: 15.00px;">apple</a><a href="/tags/apt-get/" style="font-size: 10.00px;">apt-get</a><a href="/tags/asterisk/" style="font-size: 10.00px;">asterisk</a><a href="/tags/atom协议/" style="font-size: 10.00px;">atom协议</a><a href="/tags/awesome/" style="font-size: 10.00px;">awesome</a><a href="/tags/bug/" style="font-size: 10.00px;">bug</a><a href="/tags/chrome/" style="font-size: 10.00px;">chrome</a><a href="/tags/cookie/" style="font-size: 10.00px;">cookie</a><a href="/tags/css/" style="font-size: 15.00px;">css</a><a href="/tags/darggable/" style="font-size: 10.00px;">darggable</a><a href="/tags/dialog/" style="font-size: 10.00px;">dialog</a><a href="/tags/div/" style="font-size: 15.00px;">div</a><a href="/tags/dns/" style="font-size: 10.00px;">dns</a><a href="/tags/drupal/" style="font-size: 10.00px;">drupal</a><a href="/tags/editdns/" style="font-size: 10.00px;">editdns</a><a href="/tags/everydns/" style="font-size: 10.00px;">everydns</a><a href="/tags/firefox/" style="font-size: 20.00px;">firefox</a><a href="/tags/flash上传/" style="font-size: 10.00px;">flash上传</a>
  </div>
</div>


  <div class="widget tag">
<h3 class="title"><a href="http://www.douban.com/people/liangpeng_net" target="_blank">我的豆瓣</a></h3>
<div style="padding:30px">
    <script type="text/javascript" src="http://www.douban.com/service/badge/liangpeng_net/?selection=latest&amp;picsize=small&amp;hideself=on&amp;show=collection&amp;n=9&amp;hidelogo=on&amp;cat=drama%7Cmovie%7Cbook%7Cmusic&amp;columns=3"></script>
</div>
</div>


  <div class="widget tag">
<h3 class="title">友情链接</h3>
<ul class="entry">
<li><a href="http://www.flive.me" title="赏花赏月赏秋香">花样年华</a></li>
</ul>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2014 张飞
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>